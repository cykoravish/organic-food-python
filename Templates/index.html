{% extends 'base.html' %}
{% load static %}

{% block title %} Home {% endblock title %}


{% block body %}

<!-- About Us Section -->
<section id="about" class="about section" style="background:rgb(243, 245, 248); padding: 60px 0;">
  <div class="container" data-aos="fade-up">

    <!-- Section Header -->
    <div class="text-center mb-5">
      <h1 class="fw-bold" style="color: #00d4ff; font-size: 2.2rem;">🌿 About Us - Organic Hub</h1>
      <h6 style="color:rgb(238, 126, 126); font-size: 1.2rem;">Nurturing a healthier future with 100% organic and sustainable products.</h6>
    </div>

    <!-- Content Column -->
    <div class="col-lg-10 mx-auto">
      <h2 class="fw-bold" style="color: #00d4ff; font-size: 1.8rem;">Welcome to Organic Hub – Your Gateway to Healthy Living</h2>
      <h5 style="color:rgb(14, 11, 11); font-size: 1.3rem;">
        At <strong>Organic Hub</strong>, we are committed to bringing you fresh, organic, and chemical-free products directly from trusted farmers. 
        Our mission is to promote a healthier lifestyle by providing natural, unprocessed, and high-quality groceries that you can rely on.
      </h5>
      
      <p style="color:rgb(12, 11, 11); font-size: 1.1rem;">
        We believe that making the right food choices should be simple and stress-free. That’s why we offer a carefully curated selection of farm-fresh fruits, vegetables, and eco-friendly packaged goods—ensuring you and your family get the best nature has to offer.
      </p>

      <h3 class="fw-bold" style="color: #00d4ff; font-size: 1.6rem;">Why Choose Organic Hub?</h3>
      <ul class="list-unstyled">
        <li style="color:rgb(14, 11, 11); font-size: 1.1rem;">
          <i class="bi bi-check-circle-fill" style="color: #00d4ff;"></i> <strong>100% Organic & Chemical-Free:</strong> We guarantee pure, natural, and pesticide-free products.
        </li>
        <li style="color:rgb(17, 7, 7); font-size: 1.1rem;">
          <i class="bi bi-check-circle-fill" style="color: #00d4ff;"></i> <strong>Farm-Fresh & Locally Sourced:</strong> Supporting local farmers while ensuring peak freshness.
        </li>
        <li style="color:rgb(14, 11, 11); font-size: 1.1rem;">
          <i class="bi bi-check-circle-fill" style="color: #00d4ff;"></i> <strong>Sustainable & Eco-Friendly:</strong> Our packaging is designed to reduce waste and promote sustainability.
        </li>
        <li style="color:rgb(22, 20, 20); font-size: 1.1rem;">
          <i class="bi bi-check-circle-fill" style="color: #00d4ff;"></i> <strong>Quick & Hassle-Free Delivery:</strong> Enjoy seamless home delivery, bringing freshness right to your doorstep.
        </li>
        <li style="color:rgb(56, 14, 14); font-size: 1.1rem;">
          <i class="bi bi-check-circle-fill" style="color: #00d4ff;"></i> <strong>Healthier You, Healthier Planet:</strong> Choosing organic means making a positive impact on both your well-being and the environment.
        </li>
      </ul>

      <p class="mt-3" style="color:rgb(13, 13, 14); font-size: 1.2rem;">
        <strong>Organic Hub</strong> is more than just a grocery store—it’s a movement towards a healthier and more sustainable future. Every purchase you make supports ethical sourcing and a greener planet.  
        Join us on this journey and embrace a lifestyle filled with fresh, wholesome goodness! 🌍💚
      </p>

      <div class="text-center mt-4">
        <a href="/products" class="btn" style="background: #00d4ff; color: black; width: 130px; padding: 8px 12px; font-size: 1rem; border-radius: 5px;">Explore</a>
      </div>
    </div>

  </div>
</section>



<section id="features" class="features section" style="background:rgba(248, 215, 218, 0.67); padding: 60px 0;"> <!-- Pink Background -->
  <div class="container section-title text-center" data-aos="fade-up">
    <h1 class="text-Black fw-bold">🔥 Our Cool Features 🔥</h1>
    <p class="text- black">Experience the best with our <span class="fw-bold text-warning">Exclusive Features</span></p>
  </div>
  
  <div class="container">
    <div class="row g-4">
      <!-- Feature 1 -->
      <div class="col-md-3">
        <div class="feature-card p-2 rounded shadow-lg text-center bg-white d-block" 
             onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0px 10px 20px rgba(0, 0, 0, 0.2)';"
              onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0px 5px 15px rgba(0, 0, 0, 0.1)';"
             style="transition: transform 0.3s ease, opacity 0.3s ease;">
          <img src="{% static 'assets/img/feature-img-1.png' %}" alt="Feature Image 1" class="img-fluid">
          <h4 class="text-danger mt-3">🍏 Fresh Food</h4>
          <p>Enjoy organic, farm-fresh delights with every order.</p>
        </div>
      </div>
      <!-- Feature 2 -->
      <div class="col-md-3">
        <div class="feature-card p-3 rounded shadow-lg text-center bg-white d-block" 
              onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0px 10px 20px rgba(0, 0, 0, 0.2)';"
              onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0px 5px 15px rgba(0, 0, 0, 0.1)';"
             style="transition: transform 0.3s ease, opacity 0.3s ease;">
          <img src="{% static 'assets/img/feature-img-2.png' %}" alt="Feature Image 2" class="img-fluid">
          <h4 class="text-primary mt-3">🚀 Fast Delivery</h4>
          <p>Speedy and reliable delivery to your doorstep.</p>
        </div>
      </div>
      <!-- Feature 3 -->
      <div class="col-md-3">
        <div class="feature-card p-2 rounded shadow-lg text-center bg-white d-block" 
             onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0px 10px 20px rgba(0, 0, 0, 0.2)';"
              onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0px 5px 15px rgba(0, 0, 0, 0.1)';"
             style="transition: transform 0.3s ease, opacity 0.3s ease;">
          <img src="{% static 'assets/img/feature-img-3.png' %}" alt="Feature Image 3" class="img-fluid">
          <h4 class="text-success mt-3">💳 Online Payment</h4>
          <p>Secure and hassle-free transactions anytime.</p>
        </div>
      </div>
      <!-- Feature 4 -->
      <div class="col-md-3">
        <div class="feature-card p-2 rounded shadow-lg text-center bg-white d-block" 
              onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0px 10px 20px rgba(0, 0, 0, 0.2)';"
              onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0px 5px 15px rgba(0, 0, 0, 0.1)';"
             style="transition: transform 0.3s ease, opacity 0.3s ease;">
          <img src="{% static 'assets/img/feature-img-4.jpg' %}" alt="Feature Image 4" class="img-fluid">
          <h4 class="text-warning mt-3">📍 Tracking System</h4>
          <p>Track your order in real-time from farm to plate.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="portfolio" class="portfolio section" style="background: linear-gradient(135deg, rgb(236, 227, 232), rgb(28, 150, 140));">
  <div class="container section-title" data-aos="fade-up">
    <h1 style="font-family: Arial, sans-serif;">Welcome to Shop</h1>
    <p><span>Check Our</span> <span class="description-title">Products</span></p>
  </div>

  <div class="container">
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
          <strong>{{ message }}</strong>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}

    {% for product, range, nSliders in allProds %}
      <div class="container">
        <h2 class="my-3 text-center text-success bg-light py-2">{{ product.0.category }} Flashsale</h2>
      </div>

      <div id="carousel{{ forloop.counter }}" class="carousel slide" data-bs-ride="carousel" data-bs-interval="2000">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="row">
              {% for i in product %}
                <div class="col-md-3 mt-3">
                  <div class="card shadow-lg border-0 rounded" style="transition: transform 0.3s ease; border-radius: 10px; overflow: hidden; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);">
                    <img src="{{ i.image.url }}" class="card-img-top" alt="Image not found" style="height: 200px; object-fit: cover; border-radius: 10px;">
                    <div class="card-body" style="padding: 15px;">
                      <h5 class="card-title" id="namepr{{ i.id }}" style="font-weight: bold;">{{ i.product_name }}</h5>
                      <p class="card-text" style="font-size: 14px;">{{ i.desc|slice:"0:53" }}...</p>
                      <h6 class="card-title text-danger" style="font-weight: bold;">
                        Price: <span id="pricepr{{ i.id }}">₹{{ i.price }}</span>
                      </h6>

                      <!-- Quantity Selector -->
                      <div class="d-flex justify-content-between align-items-center mt-3">
                        <button class="btn btn-success cart" 
                                data-id="{{ i.id }}" 
                                data-name="{{ i.product_name }}" 
                                data-price="{{ i.price }}" 
                                data-image="{{ i.image.url }}"
                                onclick="addToCart({{ i.id }})"
                                style="background-color: #28a745; color: white; border-radius: 25px; padding: 10px 20px; font-weight: bold; transition: background-color 0.3s ease;">
                          Add To Cart
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                {% if forloop.counter|divisibleby:4 and not forloop.last %}
                  </div></div><div class="carousel-item"><div class="row">
                {% endif %}
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div> 
</section>



<section id="reviews" style="background:rgb(187, 201, 185); padding: 50px 0;">
  <div class="container">
      <!-- Section Title -->
      <div class="text-center mb-4">
          <h2 class="fw-bold text-primary">🌟 Customer Reviews 🌟</h2>
          <p class="text-muted">See what our happy customers say about us!</p>
      </div>

      <!-- Reviews Grid -->
      <div class="row">
          <!-- Review 1 -->
          <div class="col-md-6 col-lg-3">
              <div class="review-card text-center p-3 shadow-sm rounded bg-white">
                  <img src="{% static 'assets/img/team/team-1.jpg' %}" class="rounded-circle mb-2" style="width: 60px; height: 60px;">
                  <h5 class="text-success">Amit Sharma</h5>
                  <p class="text-warning">⭐⭐⭐⭐⭐</p>
                  <p>"Amazing service! The food was fresh and delicious."</p>
              </div>
          </div>

          <!-- Review 2 -->
          <div class="col-md-6 col-lg-3">
              <div class="review-card text-center p-3 shadow-sm rounded bg-white">
                  <img src="{% static 'assets/img/team/team-2.jpg' %}" class="rounded-circle mb-2" style="width: 60px; height: 60px;">
                  <h5 class="text-success">Priya Verma</h5>
                  <p class="text-warning">⭐⭐⭐</p>
                  <p>"Great experience! Loved the ambiance and food quality."</p>
              </div>
          </div>

          <!-- Review 3 -->
          <div class="col-md-6 col-lg-3">
              <div class="review-card text-center p-3 shadow-sm rounded bg-white">
                  <img src="{% static 'assets/img/team/team-3.jpg' %}"class="rounded-circle mb-2" style="width: 60px; height: 60px;">
                  <h5 class="text-success">Rahul Singh</h5>
                  <p class="text-warning">⭐⭐⭐⭐⭐</p>
                  <p>"Best food delivery service! Always on time and hot meals."</p>
              </div>
          </div>

          <!-- Review 4 -->
          <div class="col-md-6 col-lg-3">
              <div class="review-card text-center p-3 shadow-sm rounded bg-white">
                  <img src="{% static 'assets/img/team/team-4.jpg' %}" class="rounded-circle mb-2" style="width: 60px; height: 60px;">
                  <h5 class="text-success">Sneha Kapoor</h5>
                  <p class="text-warning">⭐⭐⭐⭐</p>
                  <p>"Good variety in the menu, but delivery could be a bit faster."</p>
              </div>
          </div>
      </div>

      <!-- Show More Button -->
      <div class="text-center mt-3">
        <button class="btn btn-sm px-4 py-2" style="width: 150px; background-color:rgb(107, 204, 87); color: white;" onclick="window.location.href='/reviews/'">
          Show More
      </button>
      
    </div>
    
  </div>

  <div class="container-xxl py-5" style="background: linear-gradient(135deg, rgba(225, 233, 225, 0.7), rgba(107, 168, 151, 0.7));">
    <div class="container">
        <!-- Section Header -->
        <div class="section-header text-center mx-auto mb-9 wow fadeInUp" 
        data-wow-delay="0.1s" 
        style="background: linear-gradient(135deg, rgba(241, 247, 231, 0.62), rgb(199, 218, 200)); 
               padding: 20px 20px; border-radius: 8px; box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.2); 
               max-width: 600px;">
        
        <h4 class="display-2 mb-1 text-white">Latest Blog</h4> <!-- Changed to h3 for smaller size -->
    </div>
    
    <h2 class="text-center mb-4" style="font-family: 'Arial', sans-serif; color: #333; font-size: 28px; font-weight: 600; line-height: 1.5; text-transform: capitalize;">
      Explore Engaging Insights on Organic Farming, Sustainability, and the Future of Agriculture
    </h2>
  
    <!-- Blog Grid -->
    <div class="row g-4">
        <!-- Blog Post 1 -->
        <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
            <div class="card border-0 shadow-lg bg-white rounded">
                <img class="card-img-top" src="{% static 'assets/img/blog-1.jpg' %}" alt="Blog Image">
                <div class="card-body">
                    <h5 class="card-title"><a href="#">The Secrets of Organic Farming</a></h5>
                    <p class="card-text">Learn how to cultivate fresh organic fruits and vegetables with sustainable methods.</p>
                    <div class="d-flex justify-content-between text-muted">
                        <small><i class="fa fa-user text-primary me-2"></i>Admin</small>
                        <small><i class="fa fa-calendar text-primary me-2"></i>01 Jan, 2025</small>
                    </div>
                    <a href="/blog" class="btn btn-sm btn-primary mt-3">Read More</a>
                </div>
            </div>
        </div>
    
        <!-- Blog Post 2 -->
        <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
            <div class="card border-0 shadow-lg bg-white rounded">
                <img class="card-img-top" src="{% static 'assets/img/blog-2.jpg' %}" alt="Blog Image">
                <div class="card-body">
                    <h5 class="card-title"><a href="#">The Future of Sustainable Agriculture</a></h5>
                    <p class="card-text">Discover the latest trends and technologies shaping sustainable farming.</p>
                    <div class="d-flex justify-content-between text-muted">
                        <small><i class="fa fa-user text-primary me-2"></i>Admin</small>
                        <small><i class="fa fa-calendar text-primary me-2"></i>05 Feb, 2025</small>
                    </div>
                    <a href="/blog" class="btn btn-sm btn-primary mt-3">Read More</a>
                </div>
            </div>
        </div>
    
        <!-- Blog Post 3 -->
        <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
            <div class="card border-0 shadow-lg bg-white rounded">
                <img class="card-img-top" src="{% static 'assets/img/blog-3.jpg' %}" alt="Blog Image">
                <div class="card-body">
                    <h5 class="card-title"><a href="#">10 Tips for Growing Healthy Crops</a></h5>
                    <p class="card-text">Expert advice on soil preparation, irrigation, and organic fertilizers.</p>
                    <div class="d-flex justify-content-between text-muted">
                        <small><i class="fa fa-user text-primary me-2"></i>Admin</small>
                        <small><i class="fa fa-calendar text-primary me-2"></i>12 Feb, 2025</small>
                    </div>
                    <a href="/blog" class="btn btn-sm btn-primary mt-3">Read More</a>
                </div>
            </div>
        </div>
    </div>
</div>

    












<script>

// Load the cart from local storage
// Load cart from localStorage
function loadCart() {
  return (JSON.parse(localStorage.getItem('cart')) || []).filter(item => item !== null);
}

// Save the cart to localStorage
function saveCart(cart) {
  localStorage.setItem('cart', JSON.stringify(cart.filter(item => item !== null)));
}

// Get total price of cart items
function getCartTotal() {
  return loadCart().reduce((total, item) => total + (item.price * item.quantity), 0).toFixed(2);
}

// Get total number of items in cart
function getCartLength() {
  return loadCart().reduce((total, item) => total + (item.quantity || 0), 0);
}

function addToCart(id) {
  let cart = loadCart();
  let cartBtn = document.querySelector(`.cart[data-id='${id}']`);
  
  if (!cartBtn) return;

  let productName = cartBtn.getAttribute('data-name');
  let productPrice = parseFloat(cartBtn.getAttribute('data-price'));
  let productImage = cartBtn.getAttribute('data-image');

  let item = cart.find(item => String(item.id) === String(id));

  if (item) {
      item.quantity += 1;
  } else {
      cart.push({ id, name: productName, price: productPrice, image: productImage, quantity: 1 });
  }

  saveCart(cart);
  updateCartCount();
  refreshCartPopover();
}


// Increase or decrease quantity function
function updateCartQuantity(itemId, action) {
  let cart = loadCart();
  let item = cart.find(p => String(p.id) === String(itemId));

  if (item) {
      if (action === 'increase') {
          item.quantity += 1;
      } else if (action === 'decrease') {
          if (item.quantity > 1) {
              item.quantity -= 1;
          } else {
              removeItemFromCart(itemId);
              return;
          }
      }

      saveCart(cart);

      let quantityInput = document.getElementById(`cart-qty-${itemId}`);
      if (quantityInput) {
          quantityInput.value = item.quantity;
      }

      // ✅ Update cart UI
      updateCartCount();
      refreshCartPopover();
  }
}

// Remove item from cart
function removeItemFromCart(itemId) {
  let cart = loadCart();
  cart = cart.filter(item => String(item.id) !== String(itemId));
  saveCart(cart);

  updateCartCount();
  refreshCartPopover();
}

// Event delegation for Increase & Decrease buttons
document.addEventListener('click', function (event) {
  if (event.target.classList.contains('increase-cart')) {
      let itemId = event.target.getAttribute('data-id');
      updateCartQuantity(itemId, 'increase');
  }

  if (event.target.classList.contains('decrease-cart')) {
      let itemId = event.target.getAttribute('data-id');
      updateCartQuantity(itemId, 'decrease');
  }

  if (event.target.classList.contains('delete-item')) {
      let itemId = event.target.getAttribute('data-id');
      removeItemFromCart(itemId);
  }
});

// Update cart count
function updateCartCount() {
  const cartCountElement = document.getElementById('cart');
  if (cartCountElement) {
      cartCountElement.textContent = getCartLength();
  }
}

// Refresh cart popover
function refreshCartPopover() {
  const popoverElement = document.getElementById('popcart');
  if (popoverElement) {
      const popoverInstance = bootstrap.Popover.getInstance(popoverElement);
      if (popoverInstance) {
          popoverInstance.dispose();
      }
      new bootstrap.Popover(popoverElement, {
          content: renderCartPopover(),
          html: true,
          trigger: 'focus',
          sanitize: false
      });
  }
}

// Render cart popover
function renderCartPopover() {
  const items = loadCart();
  let cartContent = `<div class="p-3" style="width: 300px; max-height: 400px; overflow-y: auto;">`;
  let totalPrice = getCartTotal();

  if (items.length > 0) {
      cartContent += `<ul class="list-unstyled">`;
      items.forEach(item => {
          cartContent += `
              <li class="d-flex justify-content-between align-items-center mb-2">
                  <div class="d-flex">
                      <img src="${item.image}" alt="${item.name}" class="w-14" style="width: 50px; height: 50px; object-fit: cover; border-radius: 5px;">
                      <div class="ms-2">
                          <p class="mb-0">${item.name}</p>
                          <div class="d-flex align-items-center">
                              <button class="btn btn-sm btn-outline-danger decrease-cart" data-id="${item.id}">-</button>
                              <input id="cart-qty-${item.id}" type="text" value="${item.quantity}" class="form-control text-center mx-2 cart-quantity" style="width: 50px;" readonly>
                              <button class="btn btn-sm btn-outline-success increase-cart" data-id="${item.id}">+</button>
                          </div>
                      </div>
                  </div>
                  <button class="btn btn-sm delete-item" data-id="${item.id}" style="border: none; background: none;">
                      <i class="bi bi-trash text-danger" style="font-size: 1rem;"></i>
                  </button>
              </li>`;
      });
      cartContent += `</ul></div>`;
      cartContent += `
          <div class="p-3 border-top d-flex flex-column align-items-center" style="background: white; position: sticky; bottom: 0;">
              <div class="d-flex justify-content-between w-100">
                  <strong>Total:</strong>
                  <span>₹${totalPrice}</span>
              </div>
              <div class="mt-2 w-100 d-flex justify-content-between">
                  <a href="/checkout" class="btn btn-sm px-3" style="background-color: #28a745; border-color: #28a745; color: white;">Checkout</a>
                  <button id="closeCart" class="btn btn-sm px-3" style="background-color: #dc3545; border-color: #dc3545; color: white; margin-left: 10px;">
                      <i class="bi bi-x-circle-fill"></i>
                  </button>
              </div>
          </div>`;
  } else {
      cartContent = '<p class="text-center p-3">Your cart is empty!</p>';
  }

  return cartContent;
}

// Initialize cart popover
document.getElementById('popcart').addEventListener('click', function () {
  const popoverElement = document.getElementById('popcart');
  const popoverInstance = new bootstrap.Popover(popoverElement, {
      content: renderCartPopover(),
      html: true,
      trigger: 'focus',
      sanitize: false
  });
  popoverInstance.show();
});

// Update cart count on page load
document.addEventListener('DOMContentLoaded', updateCartCount);
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Updated jQuery version -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

{% endblock %}
